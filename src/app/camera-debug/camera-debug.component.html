<mat-toolbar>
  摄像头调试
  <span *ngIf="camera" class="title-tip">
      &nbsp;&nbsp;&nbsp;&nbsp; API地址: {{camera.apiBase}}
    &nbsp;&nbsp;&nbsp;&nbsp; 序列号: {{camera.deviceNo}}
    </span>
  <span class="spacer"></span>
  <span *ngIf="camera">
      <button mat-button color="primary" (click)="getDeviceNo()" [disabled]="processes.getDeviceNo">
        <mat-icon>tag</mat-icon>
        {{camera.deviceNo ? '重新获取序列号' : '获取序列号'}}
      </button>
    </span>
</mat-toolbar>


<ng-template [ngIf]="camera">

  <div class="alt-info" *ngIf="!camera.deviceNo">请先获取设备序列号</div>

  <mat-tab-group animationDuration="0ms" *ngIf="camera.deviceNo">
    <mat-tab label="实时画面">

      <div fxLayoutAlign="end">
        <button mat-stroked-button color="primary" (click)="getCameraImg()" [disabled]="processes.getCameraImg">
          <mat-icon>image</mat-icon>
          {{imgs && imgs.img1 ? '刷新' : '获取'}}
        </button>
      </div>

      <div class="images">
        <mat-spinner *ngIf="processes.getCameraImg"></mat-spinner>
        <img [src]="camera.apiBase+imgs.img1" *ngIf="imgs&&imgs.img1" width="1080" alt="摄像头画面"/>
      </div>
    </mat-tab>
    <mat-tab label="初始化">
      <mat-form-field class="positions-input">
        <input type="text" placeholder="4个点位置（左上，右上，右下，左下）" matInput
               [(ngModel)]="positionsStr">
      </mat-form-field>
      &nbsp;
      <button mat-stroked-button color="primary" (click)="initScreenPosition()"
              [disabled]="processes.initScreenPosition">
        <mat-icon>fullscreen</mat-icon>
        初始化屏幕
      </button>
    </mat-tab>
    <mat-tab label="模板">
      <div fxLayout="row wrap">
        <div fxLayoutAlign="start">
          所有模板
        </div>
        <span class="spacer"></span>
        <div fxLayoutAlign="end">
          <button mat-stroked-button color="primary" (click)="getTemplate()" [disabled]="processes.getTemplate">
            获取所有模板
          </button>

          <button mat-stroked-button color="primary" (click)="delTemplate()" [disabled]="processes.delTemplate">
            清除所有模板
          </button>
        </div>
      </div>

      <mat-card *ngFor="let tem of templates" class="example-card">
        <mat-card-header>
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title>{{tem.collectionId}}</mat-card-title>
          <mat-card-subtitle>参数：{{tem.param|json}}</mat-card-subtitle>
        </mat-card-header>
        <img mat-card-image [src]="camera.apiBase+tem.img" alt="Photo of a Shiba Inu">
        <mat-card-content>
          <p>
            参数：{{tem.param|json}}
          </p>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button>LIKE</button>
          <button mat-button>SHARE</button>
        </mat-card-actions>
      </mat-card>


      <p>&nbsp;</p>


      <div fxLayoutAlign="end">
        <button mat-stroked-button color="primary" (click)="getCollection()" [disabled]="processes.getCollection">
          获取采集模板
        </button>
      </div>

      <div class="template" *ngIf="template">
        <div class="images">
          <img [src]="camera.apiBase+template.temp" *ngIf="template.temp" width="1080" alt="模板"/>
        </div>
        <mat-form-field class="template-param">
          <input type="text" placeholder="模板参数" matInput [value]="template.param.join(',')">
        </mat-form-field>

      </div>

      <p>&nbsp;</p>

      <button mat-stroked-button color="primary" (click)="addTemplateH()"
              [disabled]="!template||processes.addTemplateH">
        增加此采集模板
      </button>

      <p>&nbsp;</p>

    </mat-tab>
  </mat-tab-group>

</ng-template>

